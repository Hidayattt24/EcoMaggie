{
  "openapi": "3.0.3",
  "info": {
    "title": "VenusConnect - WhatsApp API Gateway",
    "description": "# WhatsApp Multi-Device API Gateway\n\nREST API untuk mengirim dan menerima pesan WhatsApp.\n\n## üîê Authentication\n```\nx-api-key: your-api-key-here\n```\n\n## ‚è±Ô∏è Rate Limiting\n\n- **100 requests/minute** per IP\n- Jika limit terlampaui, response akan error 429\n\n## üìé Media Support\n\nMedia dapat dikirim dalam 3 format:\n- **URL**: `https://example.com/image.jpg`\n- **Local Path**: `/path/to/file.pdf`\n- **Base64**: `data:image/jpeg;base64,/9j/4AAQ...`\n\n## üîî Webhook Events\n\nJika webhook URL dikonfigurasi, events berikut akan dikirim:\n- `message.received` - Pesan masuk\n- `message.status` - Status pesan (sent/delivered/read)\n- `presence.update` - Online/offline/typing\n\n",
    "version": "1.0.0",
    "contact": {
      "name": "VenusConnect Support",
      "email": "contact@venusverse.dev",
      "url": "https://whatsapp.venusverse.me"
    },
    "license": {
      "name": "MIT",
      "url": "https://opensource.org/licenses/MIT"
    }
  },
  "components": {
    "securitySchemes": {
      "ApiKeyAuth": {
        "type": "apiKey",
        "name": "x-api-key",
        "in": "header",
        "description": "API key for authentication. Get your API key by registering at /api/auth/register"
      }
    },
    "schemas": {}
  },
  "paths": {
    "/api/session/create": {
      "post": {
        "summary": "Create WhatsApp session",
        "tags": [
          "Session"
        ],
        "description": "Create a new WhatsApp session and get QR code",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "session_id": {
                    "type": "string",
                    "description": "Optional custom session ID"
                  },
                  "webhook_url": {
                    "type": "string",
                    "description": "Webhook URL for events",
                    "nullable": true,
                    "example": "https://webhook.site/..."
                  }
                }
              }
            }
          }
        },
        "security": [
          {
            "ApiKeyAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Default Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "session_id": {
                          "type": "string"
                        },
                        "status": {
                          "type": "string"
                        },
                        "connected": {
                          "type": "boolean"
                        },
                        "qr": {
                          "type": "string",
                          "nullable": true
                        },
                        "message": {
                          "type": "string"
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/sessions": {
      "get": {
        "summary": "List sessions",
        "tags": [
          "Session"
        ],
        "description": "Get all sessions for current user",
        "security": [
          {
            "ApiKeyAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Default Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "data": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "session_id": {
                            "type": "string"
                          },
                          "status": {
                            "type": "string"
                          },
                          "phone_number": {
                            "type": "string"
                          },
                          "name": {
                            "type": "string"
                          },
                          "connected": {
                            "type": "boolean"
                          },
                          "hasQr": {
                            "type": "boolean"
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/session/{sessionId}/status": {
      "get": {
        "summary": "Get session status",
        "tags": [
          "Session"
        ],
        "parameters": [
          {
            "schema": {
              "type": "string"
            },
            "in": "path",
            "name": "sessionId",
            "required": true
          }
        ],
        "security": [
          {
            "ApiKeyAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Default Response"
          }
        }
      }
    },
    "/api/session/{sessionId}/qr": {
      "get": {
        "summary": "Get QR code",
        "tags": [
          "Session"
        ],
        "description": "Get QR code for session authentication",
        "parameters": [
          {
            "schema": {
              "type": "string"
            },
            "in": "path",
            "name": "sessionId",
            "required": true
          }
        ],
        "security": [
          {
            "ApiKeyAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Default Response"
          }
        }
      }
    },
    "/api/session/{sessionId}": {
      "delete": {
        "summary": "Delete session",
        "tags": [
          "Session"
        ],
        "description": "Logout and delete WhatsApp session",
        "parameters": [
          {
            "schema": {
              "type": "string"
            },
            "in": "path",
            "name": "sessionId",
            "required": true
          }
        ],
        "security": [
          {
            "ApiKeyAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Default Response"
          }
        }
      }
    },
    "/api/session/{sessionId}/webhook": {
      "put": {
        "summary": "Update webhook URL",
        "tags": [
          "Session"
        ],
        "description": "Set or update the webhook URL for session events",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "webhook_url"
                ],
                "properties": {
                  "webhook_url": {
                    "type": "string",
                    "format": "uri",
                    "nullable": true
                  }
                }
              }
            }
          },
          "required": true
        },
        "security": [
          {
            "ApiKeyAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string"
            },
            "in": "path",
            "name": "sessionId",
            "required": true
          }
        ],
        "responses": {
          "200": {
            "description": "Default Response"
          }
        }
      }
    },
    "/api/session/{sessionId}/send": {
      "post": {
        "summary": "Send message",
        "tags": [
          "Messaging"
        ],
        "description": "Send text and/or media to individual contact",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "to"
                ],
                "properties": {
                  "to": {
                    "type": "string",
                    "description": "Phone number (e.g., 6281234567890)"
                  },
                  "message": {
                    "type": "string",
                    "description": "Text message"
                  },
                  "media": {
                    "type": "array",
                    "description": "Array of media items",
                    "items": {
                      "type": "object",
                      "properties": {
                        "type": {
                          "type": "string",
                          "enum": [
                            "image",
                            "video",
                            "document",
                            "audio",
                            "sticker"
                          ]
                        },
                        "data": {
                          "type": "string",
                          "description": "URL, local path, or base64"
                        },
                        "caption": {
                          "type": "string"
                        },
                        "filename": {
                          "type": "string"
                        },
                        "mimetype": {
                          "type": "string"
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "required": true
        },
        "parameters": [
          {
            "schema": {
              "type": "string"
            },
            "in": "path",
            "name": "sessionId",
            "required": true
          }
        ],
        "security": [
          {
            "ApiKeyAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Default Response"
          }
        }
      }
    },
    "/api/session/{sessionId}/send-group": {
      "post": {
        "summary": "Send to group",
        "tags": [
          "Messaging"
        ],
        "description": "Send message to WhatsApp group",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "groupId"
                ],
                "properties": {
                  "groupId": {
                    "type": "string",
                    "description": "Group JID (e.g., 120363xxx@g.us)"
                  },
                  "message": {
                    "type": "string"
                  },
                  "media": {
                    "type": "array"
                  }
                }
              }
            }
          },
          "required": true
        },
        "security": [
          {
            "ApiKeyAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string"
            },
            "in": "path",
            "name": "sessionId",
            "required": true
          }
        ],
        "responses": {
          "200": {
            "description": "Default Response"
          }
        }
      }
    },
    "/api/session/{sessionId}/broadcast": {
      "post": {
        "summary": "Broadcast message",
        "tags": [
          "Messaging"
        ],
        "description": "Send message to multiple recipients with delay",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "recipients"
                ],
                "properties": {
                  "recipients": {
                    "type": "array",
                    "items": {
                      "type": "string"
                    },
                    "description": "Array of phone numbers"
                  },
                  "message": {
                    "type": "string"
                  },
                  "media": {
                    "type": "array"
                  },
                  "delay": {
                    "type": "number",
                    "default": 1000,
                    "description": "Delay in ms between messages"
                  }
                }
              }
            }
          },
          "required": true
        },
        "security": [
          {
            "ApiKeyAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string"
            },
            "in": "path",
            "name": "sessionId",
            "required": true
          }
        ],
        "responses": {
          "200": {
            "description": "Default Response"
          }
        }
      }
    },
    "/api/session/{sessionId}/schedule": {
      "post": {
        "summary": "Create scheduled message",
        "tags": [
          "Scheduled"
        ],
        "description": "Schedule a message to be sent at specific time",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "recipient",
                  "scheduled_at"
                ],
                "properties": {
                  "recipient": {
                    "type": "string",
                    "description": "Phone number or group JID"
                  },
                  "recipient_type": {
                    "type": "string",
                    "enum": [
                      "individual",
                      "group"
                    ],
                    "default": "individual"
                  },
                  "message": {
                    "type": "string"
                  },
                  "media": {
                    "type": "array"
                  },
                  "scheduled_at": {
                    "type": "string",
                    "format": "date-time",
                    "description": "ISO 8601 date-time"
                  }
                }
              }
            }
          },
          "required": true
        },
        "security": [
          {
            "ApiKeyAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string"
            },
            "in": "path",
            "name": "sessionId",
            "required": true
          }
        ],
        "responses": {
          "200": {
            "description": "Default Response"
          }
        }
      },
      "get": {
        "summary": "List pending scheduled messages",
        "tags": [
          "Scheduled"
        ],
        "security": [
          {
            "ApiKeyAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string"
            },
            "in": "path",
            "name": "sessionId",
            "required": true
          }
        ],
        "responses": {
          "200": {
            "description": "Default Response"
          }
        }
      }
    },
    "/api/session/{sessionId}/schedule/history": {
      "get": {
        "summary": "Get scheduled message history",
        "tags": [
          "Scheduled"
        ],
        "description": "Get sent/failed/cancelled messages",
        "security": [
          {
            "ApiKeyAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string"
            },
            "in": "path",
            "name": "sessionId",
            "required": true
          }
        ],
        "responses": {
          "200": {
            "description": "Default Response"
          }
        }
      }
    },
    "/api/session/{sessionId}/schedule/{messageId}": {
      "get": {
        "summary": "Get scheduled message by ID",
        "tags": [
          "Scheduled"
        ],
        "security": [
          {
            "ApiKeyAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string"
            },
            "in": "path",
            "name": "sessionId",
            "required": true
          },
          {
            "schema": {
              "type": "string"
            },
            "in": "path",
            "name": "messageId",
            "required": true
          }
        ],
        "responses": {
          "200": {
            "description": "Default Response"
          }
        }
      },
      "delete": {
        "summary": "Cancel scheduled message",
        "tags": [
          "Scheduled"
        ],
        "security": [
          {
            "ApiKeyAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string"
            },
            "in": "path",
            "name": "sessionId",
            "required": true
          },
          {
            "schema": {
              "type": "string"
            },
            "in": "path",
            "name": "messageId",
            "required": true
          }
        ],
        "responses": {
          "200": {
            "description": "Default Response"
          }
        }
      }
    },
    "/api/session/{sessionId}/groups": {
      "get": {
        "summary": "List all groups",
        "tags": [
          "Groups"
        ],
        "description": "Get all groups the session is participating in",
        "security": [
          {
            "ApiKeyAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string"
            },
            "in": "path",
            "name": "sessionId",
            "required": true
          }
        ],
        "responses": {
          "200": {
            "description": "Default Response"
          }
        }
      },
      "post": {
        "summary": "Create group",
        "tags": [
          "Groups"
        ],
        "description": "Create a new WhatsApp group",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "name",
                  "participants"
                ],
                "properties": {
                  "name": {
                    "type": "string"
                  },
                  "participants": {
                    "type": "array",
                    "items": {
                      "type": "string"
                    },
                    "description": "Array of phone numbers to add"
                  }
                }
              }
            }
          },
          "required": true
        },
        "security": [
          {
            "ApiKeyAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string"
            },
            "in": "path",
            "name": "sessionId",
            "required": true
          }
        ],
        "responses": {
          "200": {
            "description": "Default Response"
          }
        }
      }
    },
    "/api/session/{sessionId}/groups/{groupId}": {
      "get": {
        "summary": "Get group info",
        "tags": [
          "Groups"
        ],
        "description": "Get group metadata and participants",
        "security": [
          {
            "ApiKeyAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string"
            },
            "in": "path",
            "name": "sessionId",
            "required": true
          },
          {
            "schema": {
              "type": "string"
            },
            "in": "path",
            "name": "groupId",
            "required": true
          }
        ],
        "responses": {
          "200": {
            "description": "Default Response"
          }
        }
      },
      "delete": {
        "summary": "Leave group",
        "tags": [
          "Groups"
        ],
        "security": [
          {
            "ApiKeyAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string"
            },
            "in": "path",
            "name": "sessionId",
            "required": true
          },
          {
            "schema": {
              "type": "string"
            },
            "in": "path",
            "name": "groupId",
            "required": true
          }
        ],
        "responses": {
          "200": {
            "description": "Default Response"
          }
        }
      }
    },
    "/api/session/{sessionId}/groups/{groupId}/add": {
      "post": {
        "summary": "Add participants",
        "tags": [
          "Groups"
        ],
        "description": "Add members to group",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "participants"
                ],
                "properties": {
                  "participants": {
                    "type": "array",
                    "items": {
                      "type": "string"
                    }
                  }
                }
              }
            }
          },
          "required": true
        },
        "security": [
          {
            "ApiKeyAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string"
            },
            "in": "path",
            "name": "sessionId",
            "required": true
          },
          {
            "schema": {
              "type": "string"
            },
            "in": "path",
            "name": "groupId",
            "required": true
          }
        ],
        "responses": {
          "200": {
            "description": "Default Response"
          }
        }
      }
    },
    "/api/session/{sessionId}/groups/{groupId}/remove": {
      "post": {
        "summary": "Remove participants",
        "tags": [
          "Groups"
        ],
        "description": "Remove members from group",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "participants"
                ],
                "properties": {
                  "participants": {
                    "type": "array",
                    "items": {
                      "type": "string"
                    }
                  }
                }
              }
            }
          },
          "required": true
        },
        "security": [
          {
            "ApiKeyAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string"
            },
            "in": "path",
            "name": "sessionId",
            "required": true
          },
          {
            "schema": {
              "type": "string"
            },
            "in": "path",
            "name": "groupId",
            "required": true
          }
        ],
        "responses": {
          "200": {
            "description": "Default Response"
          }
        }
      }
    },
    "/api/auth/register": {
      "post": {
        "summary": "Register new user",
        "tags": [
          "Auth"
        ],
        "description": "Create a new user account (public endpoint)",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "username",
                  "password"
                ],
                "properties": {
                  "username": {
                    "type": "string",
                    "minLength": 3,
                    "example": "new_user"
                  },
                  "email": {
                    "type": "string",
                    "format": "email",
                    "example": "user@example.com"
                  },
                  "password": {
                    "type": "string",
                    "minLength": 6,
                    "example": "password123"
                  }
                }
              }
            }
          },
          "required": true
        },
        "responses": {
          "201": {
            "description": "Default Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "string"
                        },
                        "username": {
                          "type": "string"
                        },
                        "api_key": {
                          "type": "string"
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Default Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": false
                    },
                    "error": {
                      "type": "string"
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/auth/login": {
      "post": {
        "summary": "User login",
        "tags": [
          "Auth"
        ],
        "description": "Authenticate and get API key",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "username",
                  "password"
                ],
                "properties": {
                  "username": {
                    "type": "string",
                    "example": "admin_user"
                  },
                  "password": {
                    "type": "string",
                    "example": "securePassword123"
                  }
                }
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Default Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "string"
                        },
                        "username": {
                          "type": "string"
                        },
                        "role": {
                          "type": "string"
                        },
                        "api_key": {
                          "type": "string"
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Default Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": false
                    },
                    "error": {
                      "type": "string"
                    }
                  }
                }
              }
            }
          }
        }
      }
    }
  },
  "servers": [
    {
      "url": "http://localhost:3000",
      "description": "Development"
    },
    {
      "url": "https://whatsapp.venusverse.me",
      "description": "Production"
    }
  ],
  "security": [
    {
      "ApiKeyAuth": []
    }
  ],
  "tags": [
    {
      "name": "Auth",
      "description": "Public authentication (no API key required)"
    },
    {
      "name": "Session",
      "description": "WhatsApp session management"
    },
    {
      "name": "Messaging",
      "description": "Send messages (text, media, group, broadcast)"
    },
    {
      "name": "Scheduled",
      "description": "Scheduled message management"
    },
    {
      "name": "Groups",
      "description": "WhatsApp group management"
    }
  ],
  "externalDocs": {
    "url": "https://whatsapp.venusverse.me/docs",
    "description": "Full Documentation"
  }
}